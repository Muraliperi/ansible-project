---
- name: Wantedly failing a task
  hosts: localhost
  gather_facts: False

  tasks:
    - name: List out /home
      command: "ls /home"
      register: home_out
      failed_when: home_out.rc == 0

    - name: Fail the task if any errors occured and stop further execution
      command: cat /var/log/server.log
      register: command_output
      failed_when: "'ERROR' in command_output.stdout"
